"""
–°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å CatImageProcessor, –∫–æ—Ç–æ—Ä—ã–π:
- —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å API
- —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã CatImage
- –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –∏–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤
"""

import requests
import numpy as np
import cv2
import os
from PIL import Image
import io
import time
from cat_image import ColorCatImage, GrayscaleCatImage # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤
from dotenv import load_dotenv


# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
def time_decorator(func):
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"–ú–µ—Ç–æ–¥ {func.__name__} –∑–∞–≤–µ—Ä—à—ë–Ω –∑–∞ {end - start:.4f} —Å–µ–∫—É–Ω–¥.")
        return result
    return wrapper




def log_decorater(func):
    def wrapper(*args, **kwargs):
        original_name = func.__name__
        print(f"–í—ã–∑—ã–≤–∞—é: {original_name}")
        result = func(*args, **kwargs)
        print(f"–ó–∞–≤–µ—Ä—à–∏–ª: {original_name}")
        return result
    return wrapper

class CatImageProcessor:
    """
    –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
    """

    def __init__(self, output_dir: str):
        """
        –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

        Args:
            output_dir: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        """
        self._api_key = self._load_api_key()
        self._output_dir = output_dir
        self._create_output_directory()

    def _create_output_directory(self):
        """–°–æ–∑–¥–∞—ë—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç."""
        os.makedirs(self._output_dir, exist_ok=True)
        print(f"–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {self._output_dir}")

    @log_decorater
    def _load_api_key(self) -> str:
        """
        –ó–∞–≥—Ä—É–∑–∫–∞ API‚Äë–∫–ª—é—á–∞ –∏–∑ .env —Ñ–∞–π–ª–∞.

        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ python-dotenv:
        - load_dotenv() —á–∏—Ç–∞–µ—Ç .env
        - os.getenv('CAT_API_KEY') –±–µ—Ä—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è.
        """
        load_dotenv()
        api_key = os.getenv('CAT_API_KEY')
        return api_key



    @time_decorator
    def _download_images_and_create_objects(self, limit: int) -> list:
        """
        –°–∫–∞—á–∏–≤–∞–µ—Ç 'limit' –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã CatImage, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫.
        """
        print(f"–ó–∞–ø—Ä–∞—à–∏–≤–∞—é –∏ —Å–æ–∑–¥–∞—é –æ–±—ä–µ–∫—Ç—ã –¥–ª—è {limit} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...")
        #response = requests.get(f"https://api.thecatapi.com/v1/images/search?limit={limit}")
        headers = {'x-api-key': self._api_key}  # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        response = requests.get(
            f"https://api.thecatapi.com/v1/images/search?limit={limit}",
            headers=headers  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        )
        response.raise_for_status()
        data = response.json()
        print(data)
        print(type(data))

        cat_objects = []

        for item in data:
            url = item['url']
            print(item)
            print(type(item))
            breeds_list = item.get('breeds', [])
            print(breeds_list)

            if breeds_list:  # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–µ –ø—É—Å—Ç–æ–π
                # 3. –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –ø–æ—Ä–æ–¥—É –∏–∑ —Å–ø–∏—Å–∫–∞
                breed = breeds_list[0].get('name', 'unknown')
            else:

                breed = 'unknown'


            try:
                image_data = self._download_image(url)
            except Exception as e:
                print(f"    –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ {url}: {e}")
                continue # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
            if image_data.ndim == 3:
                cat_obj = ColorCatImage(image_data, url, breed)
            else:
                cat_obj = GrayscaleCatImage(image_data, url, breed)

            cat_objects.append(cat_obj)

        print(f"  –°–æ–∑–¥–∞–Ω–æ {len(cat_objects)} –æ–±—ä–µ–∫—Ç–æ–≤ CatImage.")
        return cat_objects

    def _download_image(self, url: str) -> np.ndarray:
        """
        –°–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫ numpy array.
        """
        response = requests.get(url)

        response.raise_for_status()
        image = Image.open(io.BytesIO(response.content))
        image_np = np.array(image)
        if image_np.ndim == 3 and image_np.shape[2] == 4: # –ï—Å–ª–∏ RGBA
            image_np = cv2.cvtColor(image_np, cv2.COLOR_RGBA2RGB)
        return image_np

    @time_decorator
    def _process_and_save_single(self, cat_img, idx: int):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
        """
        print(f"  –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ {idx}: {cat_img.breed}")

        # –û–±—Ä–∞–±–æ—Ç–∫–∞
        edges_custom = cat_img.detect_edges_custom()
        edges_library = cat_img.detect_edges_library()

        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ: safe_breed, os.path.join)
        safe_breed = cat_img.breed.replace(' ', '_') # –ó–∞–º–µ–Ω—è–µ–º –ø—Ä–æ–±–µ–ª—ã
        prefix = f"{idx}_{safe_breed}"

        original_path = os.path.join(self._output_dir, f"{prefix}_original.png")
        custom_path = os.path.join(self._output_dir, f"{prefix}_custom_edges.png")
        library_path = os.path.join(self._output_dir, f"{prefix}_library_edges.png")

        Image.fromarray(cat_img.image_data).save(original_path)
        Image.fromarray(edges_custom).save(custom_path)
        Image.fromarray(edges_library).save(library_path)

        print(f"    –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: {original_path}, {custom_path}, {library_path}")


    @time_decorator
    def run(self, limit: int = 1):
        """
        –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥: –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏.
        """
        print(f"--- –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É {limit} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ---")
        # 1. –°–∫–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç—ã CatImage
        cat_images = self._download_images_and_create_objects(limit)

        if not cat_images:
            print("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã.")
            return

        # 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞: –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å -> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
        for i, cat_img in enumerate(cat_images, 1):
            self._process_and_save_single(cat_img, i)

        print(f"--- –û–±—Ä–∞–±–æ—Ç–∫–∞ {len(cat_images)} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ---")



"""
# –°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å CatImageProcessor, –∫–æ—Ç–æ—Ä—ã–π:
# - —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å API TheCatAPI
# - —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã CatImage (—Ü–≤–µ—Ç–Ω—ã–µ –∏ —á–µ—Ä–Ω–æ-–±–µ–ª—ã–µ)
# - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–µ—Ç–µ–∫—Ü–∏—è –∫—Ä–∞–µ–≤ –¥–≤—É–º—è –º–µ—Ç–æ–¥–∞–º–∏)
# - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–∞–ø–∫—É
# - –∏–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤
# """
#
# import requests  # –î–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
# import numpy as np  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∫–∞–∫ –º–∞—Ç—Ä–∏—Ü–∞–º–∏ –ø–∏–∫—Å–µ–ª–µ–π)
# import cv2  # OpenCV - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
# import os  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫, –ø—É—Ç–∏)
# from PIL import Image  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–æ—Ç–∫—Ä—ã—Ç–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
# import io  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ –ø–∞–º—è—Ç–∏ (—á—Ç–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –±–∞–π—Ç–æ–≤)
# import time  # –î–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
# from cat_image import ColorCatImage, GrayscaleCatImage  # –ù–∞—à–∏ –∫–ª–∞—Å—Å—ã –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
# from dotenv import load_dotenv  # –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ API-–∫–ª—é—á–∞ –∏–∑ .env —Ñ–∞–π–ª–∞
#
#
# # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
# def time_decorator(func):
#     """
#     –î–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏.
#
#     –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:
#     1. –ó–∞—Å–µ–∫–∞–µ–º –≤—Ä–µ–º—è –¥–æ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏
#     2. –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
#     3. –ó–∞—Å–µ–∫–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
#     4. –í—ã–≤–æ–¥–∏–º —Ä–∞–∑–Ω–∏—Ü—É
#
#     Args:
#         func: –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å
#
#     Returns:
#         wrapper: –û–±–µ—Ä–Ω—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏
#     """
#
#     def wrapper(*args, **kwargs):
#         start = time.time()  # –ó–∞—Å–µ–∫–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
#         result = func(*args, **kwargs)  # –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
#         end = time.time()  # –ó–∞—Å–µ–∫–∞–µ–º –∫–æ–Ω–µ—á–Ω–æ–µ –≤—Ä–µ–º—è
#         print(f"–ú–µ—Ç–æ–¥ {func.__name__} –∑–∞–≤–µ—Ä—à—ë–Ω –∑–∞ {end - start:.4f} —Å–µ–∫—É–Ω–¥.")
#         return result  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
#
#     return wrapper  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±–µ—Ä—Ç–∫—É
#
#
# class CatImageProcessor:
#     """
#     –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–æ—à–µ–∫.
#
#     –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å: —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.
#
#     –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
#     1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å TheCatAPI
#     2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ü–≤–µ—Ç–Ω–æ–µ/—á–µ—Ä–Ω–æ-–±–µ–ª–æ–µ)
#     3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–µ—Ç–µ–∫—Ü–∏—è –∫—Ä–∞–µ–≤)
#     4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ñ–∞–π–ª—ã
#     """
#
#     def __init__(self, output_dir: str):
#         """
#         –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–∞. –°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
#
#         Args:
#             output_dir: –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ, –∫—É–¥–∞ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
#         """
#         self._api_key = self._load_api_key()  # –ó–∞–≥—Ä—É–∂–∞–µ–º API-–∫–ª—é—á –∏–∑ .env —Ñ–∞–π–ª–∞
#         self._output_dir = output_dir  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
#         self._create_output_directory()  # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç
#
#     def _create_output_directory(self):
#         """
#         –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
#
#         –ò—Å–ø–æ–ª—å–∑—É–µ—Ç os.makedirs —Å exist_ok=True, —á—Ç–æ–±—ã –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É,
#         –µ—Å–ª–∏ –ø–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
#         """
#         os.makedirs(self._output_dir, exist_ok=True)  # exist_ok=True - –Ω–µ –ø–∞–¥–∞—Ç—å –µ—Å–ª–∏ –ø–∞–ø–∫–∞ –µ—Å—Ç—å
#         print(f"üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {self._output_dir}")
#
#     def _load_api_key(self) -> str:
#         """
#         –ó–∞–≥—Ä—É–∂–∞–µ—Ç API-–∫–ª—é—á –∏–∑ —Ñ–∞–π–ª–∞ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
#
#         –§–∞–π–ª .env –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä–æ–∫—É:
#         CAT_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_–∑–¥–µ—Å—å
#
#         Returns:
#             str: API-–∫–ª—é—á –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω
#         """
#         load_dotenv()  # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
#         api_key = os.getenv('CAT_API_KEY')  # –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
#
#         # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ–º –µ—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç
#         if not api_key:
#             print("‚ö†Ô∏è  –í–Ω–∏–º–∞–Ω–∏–µ: CAT_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env —Ñ–∞–π–ª–µ")
#             print("   –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏")
#
#         return api_key
#
#     @time_decorator
#     def _download_images_and_create_objects(self, limit: int) -> list:
#         """
#         –°–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å API –∏ —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã CatImage.
#
#         –ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
#         1. –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å API-–∫–ª—é—á–æ–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ª–∏–º–∏—Ç–∞
#         2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Ä–æ–¥—ã (—Ç–µ–ø–µ—Ä—å –Ω–µ –≤—Å–µ–≥–¥–∞ 'unknown')
#         3. –î–æ–±–∞–≤–ª–µ–Ω has_breeds=1 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ —Å –ø–æ—Ä–æ–¥–∞–º–∏
#
#         Args:
#             limit: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
#
#         Returns:
#             list: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ CatImage (ColorCatImage –∏–ª–∏ GrayscaleCatImage)
#         """
#         print(f"üîç –ó–∞–ø—Ä–∞—à–∏–≤–∞—é {limit} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ—Ä–æ–¥–∞–º–∏...")
#
#         # 1. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
#         # –ï—Å–ª–∏ –µ—Å—Ç—å API-–∫–ª—é—á - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ, –∏–Ω–∞—á–µ –ø—É—Å—Ç—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
#         headers = {'x-api-key': self._api_key} if self._api_key else {}
#
#         # 2. –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
#         # has_breeds=1 - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤–µ—Ä–Ω—É—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ—Ä–æ–¥–µ
#         response = requests.get(
#             f"https://api.thecatapi.com/v1/images/search?limit={limit}&has_breeds=1",
#             headers=headers
#         )
#         response.raise_for_status()  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞ - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ)
#         data = response.json()  # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º JSON-–æ—Ç–≤–µ—Ç –≤ Python-–æ–±—ä–µ–∫—Ç
#         cat_objects = []  # –°–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
#
#         # 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞
#         for item in data:
#             url = item['url']  # URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
#
#             # 4. –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä–æ–¥–µ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ß–ê–°–¢–¨)
#             breeds_list = item.get('breeds', [])  # –°–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–¥ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
#
#             if breeds_list:  # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–¥ –Ω–µ –ø—É—Å—Ç–æ–π
#                 breed_info = breeds_list[0]  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –ø–æ—Ä–æ–¥—É –∏–∑ —Å–ø–∏—Å–∫–∞
#                 breed = breed_info.get('name', 'unknown')  # –ü–æ–ª—É—á–∞–µ–º –∏–º—è –ø–æ—Ä–æ–¥—ã
#
#                 # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–º—è –ø–æ—Ä–æ–¥—ã –Ω–µ –ø—É—Å—Ç–æ–µ
#                 if not breed or breed.strip() == '':
#                     breed = 'unknown'
#             else:
#                 # –ï—Å–ª–∏ –ø–æ—Ä–æ–¥ –Ω–µ—Ç –≤–æ–æ–±—â–µ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ —Å has_breeds=1)
#                 breed = 'unknown'
#
#             # 5. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ñ–æ—Ç–æ —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–æ—Ä–æ–¥–æ–π
#             if breed == 'unknown':
#                 print(f"  ‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫–∞—é —Ñ–æ—Ç–æ –±–µ–∑ –ø–æ—Ä–æ–¥—ã: {url[:50]}...")
#                 continue  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
#
#             print(f"  ‚úÖ –ù–∞—à—ë–ª –ø–æ—Ä–æ–¥—É: {breed}")
#
#             try:
#                 # 6. –°–∫–∞—á–∏–≤–∞–µ–º —Å–∞–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#                 image_data = self._download_image(url)
#             except Exception as e:
#                 print(f"    ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏: {e}")
#                 continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–±–ª–µ–º–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#
#             # 7. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç
#             # image_data.ndim - —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –º–∞—Å—Å–∏–≤–∞: 2 –¥–ª—è –ß/–ë, 3 –¥–ª—è —Ü–≤–µ—Ç–Ω–æ–≥–æ
#             if image_data.ndim == 3:
#                 cat_obj = ColorCatImage(image_data, url, breed)  # –¶–≤–µ—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#             else:
#                 cat_obj = GrayscaleCatImage(image_data, url, breed)  # –ß–µ—Ä–Ω–æ-–±–µ–ª–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#
#             cat_objects.append(cat_obj)  # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ä–µ–∫—Ç –≤ —Å–ø–∏—Å–æ–∫
#
#         print(f"  üìä –°–æ–∑–¥–∞–Ω–æ {len(cat_objects)} –æ–±—ä–µ–∫—Ç–æ–≤ CatImage.")
#         return cat_objects
#
#     def _download_image(self, url: str) -> np.ndarray:
#         """
#         –°–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ URL –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫ numpy –º–∞—Å—Å–∏–≤.
#
#         –ü—Ä–æ—Ü–µ—Å—Å:
#         1. –°–∫–∞—á–∏–≤–∞–µ–º –±–∞–π—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
#         2. –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–∫ PIL Image
#         3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ numpy array
#         4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º RGBA ‚Üí RGB
#
#         Args:
#             url: –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#
#         Returns:
#             np.ndarray: –ú–∞—Å—Å–∏–≤ –ø–∏–∫—Å–µ–ª–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
#         """
#         response = requests.get(url)  # –°–∫–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#         response.raise_for_status()  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å
#
#         # –û—Ç–∫—Ä—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ –±–∞–π—Ç–æ–≤ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
#         image = Image.open(io.BytesIO(response.content))
#
#         # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º PIL Image –≤ numpy array (–º–∞—Ç—Ä–∏—Ü—É –ø–∏–∫—Å–µ–ª–µ–π)
#         image_np = np.array(image)
#
#         # –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ RGBA (4 –∫–∞–Ω–∞–ª–∞: –∫—Ä–∞—Å–Ω—ã–π, –∑–µ–ª–µ–Ω—ã–π, —Å–∏–Ω–∏–π, –∞–ª—å—Ñ–∞-–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å)
#         if image_np.ndim == 3 and image_np.shape[2] == 4:
#             # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ RGB (3 –∫–∞–Ω–∞–ª–∞), —É–±–∏—Ä–∞—è –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª
#             image_np = cv2.cvtColor(image_np, cv2.COLOR_RGBA2RGB)
#
#         return image_np
#
#     @time_decorator
#     def _process_and_save_single(self, cat_img):
#         """
#         –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
#
#         –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è 3 —Ñ–∞–π–ª–∞:
#         1. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#         2. –ö—Ä–∞—è, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º
#         3. –ö—Ä–∞—è, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º
#
#         Args:
#             cat_img: –û–±—ä–µ–∫—Ç CatImage –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
#         """
#         print(f"  üñºÔ∏è  –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: {cat_img.breed}")
#
#         # 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –Ω–∞—Ö–æ–¥–∏–º –∫—Ä–∞—è –¥–≤—É–º—è –º–µ—Ç–æ–¥–∞–º–∏
#         edges_custom = cat_img.detect_edges_custom()  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º
#         edges_library = cat_img.detect_edges_library()  # –ê–ª–≥–æ—Ä–∏—Ç–º –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ OpenCV
#
#         # 2. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞
#         # –ó–∞–º–µ–Ω—è–µ–º –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –ø–æ—Ä–æ–¥—ã –Ω–∞ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è
#         safe_breed = cat_img.breed.replace(' ', '_')
#
#         # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤: –ø—Ä–æ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä–æ–¥—ã
#         prefix = safe_breed
#
#         # 3. –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
#         # os.path.join –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—É—Ç–∏ –¥–ª—è –ª—é–±–æ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
#         original_path = os.path.join(self._output_dir, f"{prefix}_original.png")
#         custom_path = os.path.join(self._output_dir, f"{prefix}_custom_edges.png")
#         library_path = os.path.join(self._output_dir, f"{prefix}_library_edges.png")
#
#         # 4. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG
#         Image.fromarray(cat_img.image_data).save(original_path)  # –û—Ä–∏–≥–∏–Ω–∞–ª
#         Image.fromarray(edges_custom).save(custom_path)  # –ö—Ä–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –º–µ—Ç–æ–¥–æ–º
#         Image.fromarray(edges_library).save(library_path)  # –ö—Ä–∞—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º –º–µ—Ç–æ–¥–æ–º
#
#         print(f"    üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: {original_path}")
#
#     @time_decorator
#     def run(self, limit: int = 1):
#         """
#         –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏.
#
#         –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É.
#
#         –ü—Ä–æ—Ü–µ—Å—Å:
#         1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
#         2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
#         3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
#
#         Args:
#             limit: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
#         """
#         print(f"üöÄ –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É {limit} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π")
#         print(f"üîë –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –∫–ª—é—á: {'‚úÖ –î–∞' if self._api_key else '‚ùå –ù–µ—Ç'}")
#         print("‚îÄ" * 50)
#
#         # 1. –°–∫–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã
#         cat_images = self._download_images_and_create_objects(limit)
#
#         # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É–¥–∞–ª–æ—Å—å –ª–∏ —á—Ç–æ-—Ç–æ —Å–∫–∞—á–∞—Ç—å
#         if not cat_images:
#             print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã.")
#             return  # –í—ã—Ö–æ–¥–∏–º –∏–∑ –º–µ—Ç–æ–¥–∞
#
#         print("‚îÄ" * 50)
#         print("üîÑ –ù–∞—á–∏–Ω–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...")
#
#         # 2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
#         # –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–±–æ—Ä –±–µ–∑ –Ω—É–º–µ—Ä–∞—Ü–∏–∏ (–∏–Ω–¥–µ–∫—Å—ã –Ω–µ –Ω—É–∂–Ω—ã –¥–ª—è –ª–æ–≥–∏–∫–∏)
#         for cat_img in cat_images:
#             self._process_and_save_single(cat_img)
#
#         print("‚îÄ" * 50)
#         print(f"‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ {len(cat_images)} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.")
#         print(f"üìÇ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø–∞–ø–∫–µ: {self._output_dir}")
#
#
# # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞
# if __name__ == "__main__":
#     """
#     –ë–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.
#     –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
#     """
#
#     # –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, —É–∫–∞–∑—ã–≤–∞—è –ø–∞–ø–∫—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
#     processor = CatImageProcessor("cat_results")
#
#     # –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
#     processor.run(3)